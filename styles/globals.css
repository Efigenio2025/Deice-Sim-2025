:root{
  --bg:#0b0c10; --card:#101218; --ink:#eaeaea; --muted:#96a3bf; --line:#1e2230;
  --accent:#1f6feb; --danger:#e5534b; --ok:#19c37d; --radius:16px; --tap:48px; --space:18px
}
*{box-sizing:border-box}
html,body{padding:0;margin:0}
body{
  background:var(--bg); color:var(--ink);
  font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  -webkit-text-size-adjust:100%; -webkit-tap-highlight-color:transparent
}
.wrap{max-width:980px;margin:0 auto;padding:24px;display:flex;flex-direction:column;gap:18px}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.btn{appearance:none;border:0;border-radius:12px;background:var(--accent);
  color:#fff;font-weight:800;padding:12px 16px;cursor:pointer;min-height:48px;text-decoration:none}
.ghost{background:#2b3147}
.danger{background:var(--danger)}
.card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:18px}
.status{font-size:.92rem;color:var(--muted)}
.pill{display:inline-block;background:#16213a;border:1px solid #223259;color:#b7c7ff;border-radius:999px;padding:2px 8px;font-size:.8rem;font-weight:700}
.live-inline{width:100%;border:1px solid #223259;border-radius:10px;padding:10px;background:#141822;color:#b7c7ff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.progress{height:12px;background:#1a2136;border:1px solid #223259;border-radius:999px;overflow:hidden}
.bar{height:100%;width:0;background:linear-gradient(90deg,#e5534b,#f89c2c,#f6e05e,#a4e786,#19c37d);transition:width .25s}
.scoreline{display:flex;justify-content:space-between;align-items:center;margin-top:8px}
.hidden{display:none!important}
/* Duolingo-style tokens */
.tok{display:inline-block;padding:0 4px;border-radius:6px;margin:0 2px 4px 0}
.ok{background:#12291c;border:1px solid #1f5d38}
.miss{background:#2a1616;border:1px solid #8a2c2c;text-decoration:underline}
.extra{background:#1a1d2a;border:1px solid #2f375c;opacity:.9}
/* --- Responsive layout for trainer --- */
.train-wrap.desktop {
  display: grid;
  grid-template-columns: 1.25fr 0.85fr;
  gap: 16px;
}

.train-wrap.mobile {
  display: grid;
  grid-template-columns: 1fr;
  gap: 12px;
}

@media (max-width: 860px) {
  .log { height: 140px; }
}

@media (max-width: 480px) {
  body { font-size: 15px; }
  .log { height: 120px; }
}
/* ===== Piedmont Bright Theme ===== */
:root{
  --bg-start:#e9f3ff;        /* brighter sky gradient */
  --bg-mid:#cfe6ff;
  --bg-end:#9fc9ff;
  --card:#ffffff;            /* bright cards */
  --ink:#0b1e39;             /* dark ink */
  --muted:#47608a;
  --accent:#0e63ff;
  --border:#d8e6ff;
  --chip:#f1f6ff;
  --ok:#19b56b;
  --err:#ff5c6c;
}

body.piedmont {
  background-image:
    linear-gradient(180deg, var(--bg-start), var(--bg-mid) 40%, var(--bg-end)),
    url("/images/plane-spray.jpg");
  background-repeat: no-repeat;
  background-position: right -60px top;
  background-size: 1920px auto;
  background-attachment: fixed;
  color: var(--ink);
}


/* container + card */
.pm-app { max-width: 1120px; margin: 24px auto; padding: 0 16px; }
.pm-card { background: var(--card); border: 1px solid var(--border); border-radius: 16px;
  box-shadow: 0 12px 36px rgba(5,30,74,.12); overflow: hidden; }

/* header */
.pm-header { display:flex; justify-content:space-between; align-items:center; gap:16px;
  padding: 14px 16px; border-bottom: 1px solid var(--border); background: linear-gradient(#fff, #f8fbff); }
.pm-title { display:flex; align-items:center; gap:12px; }
.pm-title img { height: 160px; }
.pm-title h1 { margin:0; font: 700 18px/1 system-ui, -apple-system, Segoe UI, Roboto; }
.pm-badge { background: var(--chip); border: 1px solid var(--border); color: var(--muted);
  border-radius: 999px; padding: 6px 10px; font-size: 12px; }

/* main grid */
.pm-main { display:grid; gap:16px; padding:16px; }
.pm-main.desktop { grid-template-columns: 1.25fr .9fr; }
.pm-main.mobile  { grid-template-columns: 1fr; }

.pm-headerControls { display:flex; align-items:center; justify-content:flex-end; gap:12px; flex-wrap:wrap; }
.pm-scenarioControl { align-items:center; gap:8px; }
.pm-statusGroup { display:flex; align-items:center; gap:8px; flex-wrap:wrap; justify-content:flex-end; }
.pm-runRow { display:flex; justify-content:space-between; align-items:flex-start; gap:12px; flex-wrap:wrap; }
.pm-startControls { gap:8px; align-items:center; flex-wrap:wrap; }
.pm-speechToggle { gap:8px; align-items:center; flex-wrap:wrap; }
.pm-switchOption { font-size:12px; color:var(--muted); font-weight:600; }
.pm-switchOption.active { color:var(--ink); }
.pm-switch { display:inline-flex; align-items:center; justify-content:center; border:none; background:transparent;
  padding:4px; cursor:pointer; position:relative; border-radius:16px; }
.pm-switch:focus-visible { outline:2px solid #0e63ff; outline-offset:2px; }
.pm-switchTrack { width:46px; height:24px; border-radius:999px; border:1px solid var(--border);
  background:#dbe7ff; position:relative; transition:background .2s ease, border-color .2s ease; }
.pm-switchThumb { width:18px; height:18px; border-radius:50%; background:#fff; position:absolute;
  top:2px; left:2px; transition:transform .2s ease; box-shadow:0 2px 6px rgba(10,44,97,.2); }
.pm-switch.manual .pm-switchTrack { background:#0e63ff; border-color:#0e63ff; }
.pm-switch.manual .pm-switchThumb { transform:translateX(24px); }
.pm-navRow, .pm-checkRow, .pm-awaitRow { gap:8px; align-items:center; flex-wrap:wrap; }
.pm-progressRow { justify-content:space-between; align-items:flex-start; gap:12px; flex-wrap:wrap; }
.pm-exportRow { justify-content:flex-end; gap:10px; flex-wrap:wrap; }

/* panels */
.pm-panel { background: #e2e8f0; border: 1px solid var(--border); border-radius: 12px; padding: 12px; }
.pm-row { display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
.pm-label { color: var(--muted); font-size: 12px; }
.pm-select, .pm-input, textarea { width:100%; background:#f6f9ff; border:1px solid var(--border); color:var(--ink);
  border-radius:10px; padding:10px 12px; font-size:14px; }
.pm-btn { cursor:pointer; border:1px solid var(--border); background:#f2f7ff; color:var(--ink);
  border-radius:12px; padding:10px 14px; font-weight:600; }
.pm-btn.pm-mobileControl { flex:1 1 0; min-width:0; }
.pm-btn.pm-mobileNavBtn { flex:1 1 0; min-width:0; padding:8px 10px; font-size:13px; white-space:nowrap; }
.pm-btn.primary.pm-mobileNavBtn { padding:8px 10px; }
.pm-btn.primary { background: linear-gradient(180deg, #2f78ff, #0e63ff); color:#fff; border-color:#0e63ff; }
.pm-btn.ghost { background:transparent; }


/* mic widget */
.pm-mic { display:flex; align-items:center; gap:8px; }
.pm-pill { display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border:1px solid var(--border);
  border-radius:999px; background:#f6f9ff; color:#34507a; font-size:12px; }
.pm-meter { flex:1; height:8px; background:#eef5ff; border:1px solid var(--border);
  border-radius:999px; overflow:hidden; }
.pm-fill { height:100%; background:#19b56b; }

/* “coach” bubble */
.pm-coach { font-size:15px; background:#f6f9ff; border-left:3px solid var(--accent); padding:12px; border-radius:8px; }

/* log */
.pm-log { height: 170px; overflow:auto; background:#fbfdff; border:1px dashed var(--border);
  border-radius:8px; padding:10px; font-family:ui-monospace, Menlo, Consolas, monospace; font-size:12px; white-space:pre-wrap; }

/* stepper */
.pm-stepper { display:flex; gap:6px; flex-wrap:wrap; }
.pm-step { width:14px; height:14px; border-radius:6px; border:1px solid var(--border); background:#eaf2ff; }
.pm-step.cur  { outline:2px solid var(--accent); }
.pm-step.ok   { background:#d6f7e9; }
.pm-step.miss { background:#ffe3e6; }

/* diff */
.pm-diff { padding:8px; border-radius:8px; background:#f6f9ff; margin:8px 0; }
.pm-wok { color:#0f7a4a; }
.pm-wmiss { color:#b00d2d; text-decoration: underline dotted; }

/* score ring */
.pm-scoreRow { display:flex; align-items:center; gap:12px; }
.pm-ring { width:72px; height:72px; }

.pm-progressTop { margin-bottom: 12px; }
.pm-progressTop .pm-progressRow { margin-top: 0; }
.pm-navRow.pm-navRowCompact { flex-direction: row; flex-wrap: nowrap; gap:6px; }
.pm-navRow.pm-navRowCompact .pm-btn { width:auto; }

/* footer */
.pm-footer { padding:12px 16px; border-top:1px solid var(--border); display:flex; justify-content:space-between;
  color:#47608a; font-size:12px; background:linear-gradient(#f8fbff,#fff); }

/* toasts */
.pm-toasts { position:fixed; right:16px; bottom:16px; display:flex; flex-direction:column; gap:8px; z-index:9999; }
.pm-toast { background:#ffffff; border:1px solid var(--border); color:#0b1e39; padding:10px 12px; border-radius:10px;
  box-shadow:0 6px 20px rgba(5,30,74,.12); }
.pm-toast.success{ border-color:#19b56b }
.pm-toast.error{ border-color:#ff5c6c }

/* responsive */
@media (hover:none) and (pointer:coarse){ .pm-btn, .pm-select, .pm-input, textarea { min-height:44px } }
@media (max-width: 860px){
  .pm-main{ padding:12px }
  .pm-log{ height:140px }
  body.piedmont{ background:#000; background-image:none; }
}
@media (max-width: 720px){
  .pm-app{ margin:16px auto; padding:0 12px; }
  .pm-card{ border-radius:14px; }
  .pm-header{ flex-direction:column; align-items:flex-start; gap:12px; }
  .pm-title{ flex-wrap:wrap; gap:10px; }
  .pm-title img{ height:110px; }
  .pm-headerControls{ width:100%; flex-direction:column; align-items:stretch; gap:12px; }
  .pm-headerControls > *{ justify-content:space-between; }
  .pm-scenarioControl{ width:100%; justify-content:space-between; }
  .pm-statusGroup{ width:100%; flex-direction:column; align-items:stretch; }
  .pm-statusGroup .pm-pill{ width:100%; text-align:center; }
  .pm-runRow{ flex-direction:column; align-items:stretch; }
  .pm-runRow .pm-mic{ width:100%; justify-content:space-between; }
  .pm-navRow{ flex-direction:column; align-items:stretch; }
  .pm-navRow .pm-btn{ width:100%; }
  .pm-checkRow{ flex-direction:column; align-items:stretch; }
  .pm-checkRow .pm-btn{ width:100%; }
  .pm-awaitRow{ flex-direction:column; align-items:stretch; }
  .pm-awaitRow .pm-btn{ width:100%; }
  .pm-scoreRow{ flex-direction:column; align-items:flex-start; }
  .pm-progressRow{ flex-direction:column; align-items:stretch; }
  .pm-exportRow{ flex-direction:column; align-items:stretch; }
  .pm-exportRow .pm-btn{ width:100%; }
  .pm-footer{ flex-direction:column; align-items:flex-start; gap:8px; }
}
@media (max-width: 480px){
  .pm-log{ height:120px }
  .pm-title img{ height:90px; }
}